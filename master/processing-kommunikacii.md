---
description: >-
  На платформе Metabot24 в одном бизнесе могут одновременно работать несколько
  ботов, с которыми одновременно могут общаться неограниченное количество
  пользователей.
---

# Процессинг коммуникаций

Сообщения от пользователей к боту и обратно отправляются не моментально, обычно задержка составляет около 14-15 секунд, в редких случаях дольше из-за нестабильного интернет-соединения со стороны пользователя или усложненного пути обмена вебхуками между платформой и каналом связи:&#x20;

**Канал - CRM - Сервис по интеграции - платформа или др.**&#x20;

Важно своевременно обслужить всех пользователей с минимальными задержками и доставить все сообщения в точной последовательности. Происходит это благодаря асинхронной архитектуры Metabot24.

Все входящие сообщения из канала принимаются сервером Metabot24 и сохраняются во входящей очереди. Очередь обрабатывается с помощью процессинга коммуникаций — коммуникационного ядра Metabot — и после обработки исходящие сообщения отправляются обратно в канал к пользователю.

В процессинге коммуникаций одновременно участвует несколько воркеров (workers) — процессов, которые разбирают входящую очередь, обрабатывают сообщения и отправляют исходящие коммуникации обратно в канал. На отправку сообщений выделена одна группа воркеров, на рассылки и триггеры - другая.&#x20;

Всего 10 воркеров.

Разработка ядра — это наиболее сложная и критичная часть системы, за которую отвечают высококвалифицированные инженеры Metabot. Сейчас ядро - это закрытая разработка, но мы планируем сделать ядро расширяемым, чтобы сторонние разработчики могли адаптировать процессинг под свои нужды без страха нарушить его работу.

Важной особенностью платформы на сегодняшний день является то, что все процессы, запрограммированные в боте, выполняются последовательно.&#x20;

Большинство ботов, созданные кастомным способом или на сторонних платформах могут реагировать на действия лидов в произвольном порядке.&#x20;

Например,  лид запустил бота, а потом походил по кнопкам - набрал историю переписки, вернулся в начало и снова нажал на кнопку, так как она не пропала, чтобы попасть в другую ветку.&#x20;

Чат-боты платформы Metabot24 пока что так не умеют. Цепочка срабатывания каждой новой команды, по запрограммированному сценарию или действию лида, или рассылки, перекрывает предыдущие и, следовательно, просто так вернутся в начало нельзя, так как начало уже “стерто” из алгоритма бота (если не стоит триггерного задания).&#x20;

{% hint style="success" %}
**Вывод:**  для того, чтобы бот работал корректно, нужно логически добавлять в скриптах в меню или командах возврат в корневое меню или на шаг назад.
{% endhint %}
