---
description: >-
  В этом уроке вы узнаете, как с помощью Metabot24 создать бота с меню, который
  сможет проинформировать клиента о товаре и принять от него заявку.
---

# Бот с меню самообслуживания

{% embed url="https://youtu.be/b\_lwL5wIxbQ" %}

Созданный вами бот с меню самообслуживания, станет отличным решением для автоматизации ваших продаж, например, в социальных сетях и мессенджерах. Вы можете создать бота для телеграмма с нуля.

{% hint style="info" %}
Мы запланировали функцию самостоятельного создания бота из шаблона, а пока готовый шаблон бота из этого урока вы можете запросить у нашей поддержки через удобный вам канал связи на странице [Помощь](https://app.metabot24.com/help).
{% endhint %}

### Создание бота

1. [Зарегистрируйтесь](https://app.metabot24.com/register) на платформе Metabot24, подтвердите электронную почту. Далее войдите в аккаунт.
2. [Создайте](https://app.metabot24.com/bot/create) нового бота, нажав кнопку _**Создать нового...**_

{% hint style="info" %}
 Рекомендуем также ознакомиться с подробным описанием [Как создать бота](https://metarex.gitbook.io/metabot24/nachat-rabotu-s-metabot24/kak-sozdat-bota).
{% endhint %}

* Укажите название бота. Например: "Торты на заказ";
* Остальные опции оставьте без изменений.

![](../.gitbook/assets/izobrazhenie%20%28194%29.png)

3. [Создайте](https://app.metabot24.com/sentence/create) новый скрипт в только что созданном боте, нажав на кнопку **Создать** **скрипт** в разделе **Настройки бота** -&gt; ****[**Скрипты**](https://app.metabot24.com/menubuilder).

{% hint style="info" %}
Рекомендуем также ознакомиться с подробным описанием [Скрипты](https://metarex.gitbook.io/metabot24/panel-upravleniya-botom/skripty).
{% endhint %}

* Укажите название первого скрипта, например: "Приветствие";
* Остальные опции оставьте без изменений.

![](../.gitbook/assets/izobrazhenie%20%2889%29.png)

* Далее откройте редактор скрипта, нажав на кнопку _Перейти в редактор скрипта_**,** расположенную напротив только что созданного вами скрипта.

{% hint style="info" %}
Рекомендуем также ознакомиться с подробным описанием[ Редактор скрипта.](https://metarex.gitbook.io/metabot24/panel-upravleniya-botom/skripty/redaktor-skripta)
{% endhint %}

![](../.gitbook/assets/izobrazhenie%20%28385%29.png)

* Добавьте команду _**Установить статус лида**_, в которой при начале общения с ботом пользователю будет установлен статус, например, "Первичное касание".

{% hint style="info" %}
Рекомендуем также ознакомиться с подробным описанием [Установить статус лида](https://metarex.gitbook.io/metabot24/komandy/ustanovit-status-lida).
{% endhint %}

![](../.gitbook/assets/izobrazhenie%20%28401%29.png)

* Добавьте команду _**Отправить текст**_, нажав на кнопку _**Добавить команду**_ и выбрав ее в открывшемся окне. Напишите текст сообщения. Текст может содержать эмодзи для эмоционального окраса вашего приветствия.

![](../.gitbook/assets/izobrazhenie%20%28314%29.png)

* Добавьте команду **Отправить изображение**, нажав на кнопку _**Добавить команду**_ и выбрав файл в диалоговом окне поиска. 

![](../.gitbook/assets/izobrazhenie%20%28360%29.png)

* Добавьте одну или несколько команд _**Отправить текст**,_ нажав на кнопку _**Добавить команду**_. Напишите текст сообщения, в котором проинформируете пользователя о дальнейших действия. 

{% hint style="info" %}
Вы можете создавать несколько последовательных записей с командой **Отправить текст**. К пользователю такие сообщения будут приходить последовательно, тем самым клиент не будет засыпан вашей информацией и что-то пропустит в сообщениях.
{% endhint %}

![](../.gitbook/assets/izobrazhenie%20%28237%29.png)

#### Создание разделов меню

4. [Создайте](https://app.metabot24.com/sentence/create) новый скрипт, в котором будет описано меню самообслуживания, то есть цепочки сценариев, которые пользователь будет выбирать самостоятельно.

* Укажите название скрипта, например: "Главное меню";
* Остальные опции оставьте без изменений;
* Далее откройте редактор скрипта, нажав на кнопку _Перейти в редактор скрипта_**,** расположенную напротив только, что созданного вами скрипта: 
  * Блок **Команды** оставляем пустым. 
  * В блоке **Меню** добавим пункт меню.

{% hint style="info" %}
Рекомендуем также ознакомиться с подробным описанием [Создание меню](https://metarex.gitbook.io/metabot24/panel-upravleniya-botom/skripty/sozdanie-menyu).
{% endhint %}

Для данного бота достаточно создать меню из 4-х разделов:

1. О нас;
2. Контакты;
3. Каталог;
4. Сделать заказ.

![&#x421;&#x43F;&#x438;&#x441;&#x43E;&#x43A; &#x43F;&#x443;&#x43D;&#x43A;&#x442;&#x43E;&#x432; &#x43C;&#x435;&#x43D;&#x44E; &#x441;&#x43A;&#x440;&#x438;&#x43F;&#x442;&#x430; &#x413;&#x43B;&#x430;&#x432;&#x43D;&#x43E;&#x435; &#x43C;&#x435;&#x43D;&#x44E;](../.gitbook/assets/izobrazhenie%20%28121%29.png)

Для создания пунктов меню выполните следующие действия:

* Нажмите на кнопку _**Добавить пункт меню**_;
* В поле _Код_ укажите цифру, которая будет служить вариантом ввода с клавиатуры. Например, цифры от 1 до 4.
* В поле _Подпись пункта меню_ укажите название раздела, например, фразу  "О нас";
* Остальные опции и настройки оставим без изменения_._

4.1. Пункт меню **"О нас"** будет содержать краткую информацию о кондитерском магазине, тематическую картинку и инструкцию для пользователя.

{% hint style="warning" %}
**Внимание!** При создании пункта меню если поле _Перейти в скрипт, после получения кода_ оставить не заполненным, т.е. по умолчанию со значением \[создать...\], то для этого пункта будет создан одноименный скрипт. Используйте данную функцию для удобства при добавлении новых пунктов меню.
{% endhint %}

![](../.gitbook/assets/izobrazhenie%20%28258%29.png)

* Далее откройте редактор скрипта, нажав на кнопку _**Перейти в редактор скрипта**_**,** расположенную напротив только, что созданного пункта меню.

![](../.gitbook/assets/izobrazhenie%20%2878%29.png)

* Добавьте одну или несколько команд _**Отправить текст**_, нажав на кнопку _**Добавить команду**_. Напишите текст сообщения, в котором отправите информацию о магазине.

{% hint style="info" %}
Блок **Меню** в данном случае необходимо оставить пустым для того, чтобы бот автоматически вернул нам предыдущий уровень после выполнения команд. Если в скрипте, описывающем пункт меню, нет вложенного подменю, то при работе бот вернет пользователю предыдущее меню.

Подробнее ознакомиться с данной функцией описания меню можно в разделе [Создание меню](https://metarex.gitbook.io/metabot24/panel-upravleniya-botom/skripty/sozdanie-menyu).
{% endhint %}

 

![](../.gitbook/assets/izobrazhenie%20%28166%29.png)

4.2. Далее вернемся в скрипт **Меню** и создадим новый пункт меню "**Контакты"**.

Пункт меню **"Контакты"** создаем аналогичным способом, наполняя его командами _**Отправить текст**_ ****с сообщениями по смыслу данного раздела.

![](../.gitbook/assets/izobrazhenie%20%28331%29.png)

4.3. Пункт меню **"Каталог"** создаем аналогичным способом. Отличие данного пункта от предыдущих в том, что его наполним и командами и вложенным меню, т.е. будет содержать подменю.

* Добавьте одну или несколько команд _**Отправить текст**_, нажав на кнопку _**Добавить команду**_. Напишите текст информационного сообщения для пользователя.

![](../.gitbook/assets/izobrazhenie%20%28305%29.png)

* Добавьте пункты подменю аналогичным способом, как было показано меню в скрипте **Меню**. Например, в качестве примера укажем 3 товара: 1. Торт "Сердце", 2. Торт "Звезда", 3. Торт "Цифра", 4. Назад в меню.
  * Пункты меню о тортах с 1 по 3, могут содержать команды _**Отправить текст**_ и _**Отправить изображение**,_ ****в которых вы расскажете о данном продукте;
  * Пункт меню **"Назад в меню"** отличается тем, что при его создании в поле _Перейти в скрипт, после получения кода_ необходимо указать уже созданный скрипт **Меню**.

{% hint style="info" %}
Обратим внимание, что пункт меню **"Назад в меню"** обязательно надо создавать, так как при вложенном подменю возврат в главное меню автоматически не производится!

Подробнее ознакомиться с данной функцией описания меню можно в разделе [Создание меню](https://metarex.gitbook.io/metabot24/panel-upravleniya-botom/skripty/sozdanie-menyu).
{% endhint %}

![](../.gitbook/assets/izobrazhenie%20%28397%29.png)

4.4. Пункт меню **"Заказать"** - это пункт, который будет содержать скрипт с ответом на вопрос пользователя и переводом диалога на оператора. 

* Добавьте команду _**Установить статус лида**_, в которой при переходе в данный пункт меню пользователю будет изменен статус, например, "Хочу заказать".

{% hint style="warning" %}
**Внимание!** При подключении интеграции с внешней CRM, эта команда изменит статус заявки в CRM.
{% endhint %}

![](../.gitbook/assets/izobrazhenie%20%28271%29.png)

* Добавьте одну или несколько команд _**Отправить текст**_, разместив там инструкции для действия пользователя.
* Добавьте команду _**Стоп**_**.**

![](../.gitbook/assets/izobrazhenie%20%28220%29.png)

5. Вернемся к редактированию скрипта **Приветствие** и добавим в него **Меню**, чтоб пользователю после приветственных сообщений предлагалось меню самообслуживания.

* Добавьте команду _**Выполнить скрипт**_, в качестве выполняемого скрипта указать скрипт **Меню**.

![](../.gitbook/assets/izobrazhenie%20%28309%29.png)

6. [Создайте](https://app.metabot24.com/sentence/create) последний скрипт в вашем боте, который будет выполняться в том случае, если пользователь выбрал не верный пункт меню**.** 

* Укажите название скрипта. Например: "Не корректный ввод";
* Тип скрипта - _Fallback_. Подробнее можно ознакомиться в разделе [Скрипты](https://metarex.gitbook.io/metabot24/panel-upravleniya-botom/skripty);
* Остальные параметры без изменения.

![](../.gitbook/assets/izobrazhenie%20%2830%29.png)

* Добавьте команду _**Отправить текст**_, в которой вы сообщите пользователю, что его вопрос не распознан. Напишите текст сообщения, например, "Вы ввели неправильную цифру. Попробуйте, пожалуйста, ещё раз.";
* Добавьте команду _**Повторить вопрос**_.

{% hint style="warning" %}
**Внимание!** Команда _Повторить вопрос_ вернет пользователю предыдущее меню.
{% endhint %}

![](../.gitbook/assets/izobrazhenie%20%28117%29.png)

Основные скрипты для работы бота созданы, далее рассмотрим создание маршрутов для взаимодействия бота с пользователями.

### Создание маршрутов

[Создайте](https://app.metabot24.com/route/create) маршруты для взаимодействия бота с пользователями, нажав на кнопку **Создать маршрут** в разделе **Настройки бота -&gt;** [**Маршруты**](https://app.metabot24.com/route)**.**

{% hint style="info" %}
Рекомендуем также ознакомиться с подробным описанием [Маршруты](https://metarex.gitbook.io/metabot24/panel-upravleniya-botom/marshruty).
{% endhint %}

1. [Создайте](https://app.metabot24.com/route/create) маршрут, который будет запускаться для приветствия.

* Введите параметры, как показано на изображении ниже;
* В качестве _Названия_ укажите "Первичное касание";
* В качестве скрипта выберите скрипт **Приветствие**;
* В _Регулярном выражении_ слитно напишите точка-звездочка ".\*" без кавычек. Это выражение означает, что бот будет реагировать на любой текст от пользователя при первом обращении;
* В качестве _Статуса_ выберите ранее созданный статус **Первичное касание**.

![](../.gitbook/assets/izobrazhenie%20%28144%29.png)

2. [Создайте](https://app.metabot24.com/route/create) маршрут, который будет запускаться когда пользователь передумал общаться с оператором и решил позвать бота из статуса **Хочу заказать**.

* Введите параметры, как показано на изображении ниже;
* В качестве _Названия_ укажите "Меню";
* В качестве скрипта выберите скрипт **Главное меню**;
* В _Регулярном выражении_ напишите фразы 

  |  | \s\*бот\s\*\|\s\*меню\s\* |
  | :--- | :--- |

{% hint style="info" %}
Это выражение означает, что бот будет реагировать на ввод текста "бот" или "меню" от пользователя.
{% endhint %}

* В качестве _Статуса_ выберите ранее созданный статус **Хочу заказать.**

![](../.gitbook/assets/izobrazhenie%20%2895%29.png)

{% hint style="warning" %}
**Внимание!** Обратите внимание, что мы сделали так, что возврат бота не изменяет статус обратно в _Первичное касание_ из _Хочет заказать_. Это сделано намеренно, чтобы менеджеры все же проверили этот диалог.
{% endhint %}

### Запуск бота в Telegram

1. Создайте бот в Telegram при помощи **@BotFather** и скопируйте токен.

{% hint style="info" %}
Рекомендуем также ознакомиться с подробным описанием[ Интеграция канала Telegram](https://metarex.gitbook.io/metabot24/podklychenie-kanal/telegram).
{% endhint %}

   2. [Создайте](https://app.metabot24.com/bot-channel/create) новый канал в Metabot в разделе **Настройки бота -&gt;** [**Каналы**](https://app.metabot24.com/bot-channel), нажав на кнопку _**Новая привязка**._

{% hint style="info" %}
Рекомендуем также ознакомиться с подробным описанием[ ](https://metarex.gitbook.io/metabot24/podklychenie-kanal/telegram)[Каналы](https://metarex.gitbook.io/metabot24/panel-upravleniya-botom/kanaly).
{% endhint %}

* Выберите Telegram в качестве Канала;
* Скопируйте токен, полученный на предыдущем шаге;
* Нажмите **Создать**, чтобы сохранить настройки.

{% hint style="warning" %}
Нажмите **Вебхук**, чтобы установить связь канала и вашим ботом. Не пропустите этот шаг!
{% endhint %}

### Взаимодействие с ботом

Далее перейдите в приложение Telegram, откройте ваш бот и нажмите кнопку **Запустить/Start**. Если вы все сделали правильно, ваш бот поприветствует вас. 

Далее выберите нужный пункт меню.

![](../.gitbook/assets/izobrazhenie%20%28241%29.png)



{% hint style="success" %}
Поздравляем вас с созданием вашего бота с меню самообслуживания на платформе Метабот24!
{% endhint %}

Попробовать в действии бот, который был описан в данном уроке можно, набрав в Telegram логин **@urok2\_menu\_bot**.

{% hint style="warning" %}
**Внимание!** Если у вас возникли затруднения с прохождением этого урока, вы можете обратиться в нашу поддержку. Вы также можете установить готовый шаблон из этого урока, запросив его в поддержке через удобный вам канал связи на странице [Помощь](https://app.metabot24.com/help).
{% endhint %}

### Следующие шаги

Воспользуйтесь следующим уроком для решения ваших бизнес-задач:

* [Бот первого касания с распознаванием естественного языка \(NLP\)](https://metarex.gitbook.io/metabot24/stati/bot-pervogo-kasaniya-s-nlp).

