---
description: Интеграция портала Битрикс24 с платформой Metabot24
---

# Битрикс24

Создать новый портал Битрикс24 вы можете самостоятельно, просто перейдите по [ссылке](https://www.bitrix24.ru/?p=8731059) и пройдите регистрацию. Далее мы сможем вам помочь его настроить под ваш бизнес.

### Настройка канала Битрикс24

Для интеграции портала **Битрикс24** c платформой Metabot24 необходимо в настройках своего бота выполнить следующие действия. В разделе **Настройки -&gt; Каналы** создать новый канал, нажав на кнопку [Новая привязка](https://app.metabot24.com/bot-channel/create).

![](../.gitbook/assets/image%20%28174%29.png)

Далее в диалоговом окне выбрать из списка канал _**Bitrix**_  и нажать кнопку **Создать**, оставив остальные поля не заполненными.

![](../.gitbook/assets/image%20%2843%29.png)

Новая привязка создана, далее необходимо нажать ссылку **Вебхук.**

![](../.gitbook/assets/image%20%28133%29.png)

Подтвердить выполняемую операцию.

![](../.gitbook/assets/image%20%28121%29.png)

Обновить страницу **Привязка к каналам** и скопировать созданный вебхук.

![](../.gitbook/assets/image%20%28161%29.png)

Перейти на свой портал Битрикс24 в раздел **Приложения**, в подраздел **Разработчикам**. Далее раздел **Готовые сценарии**, в подразделе **Другое**, выбрать **Локальное приложение**.

{% hint style="warning" %}
Настройки интеграции в Битрикс24 должен проводить пользователь с правами **Администратор**.
{% endhint %}

![](../.gitbook/assets/izobrazhenie%20%285%29.png)

В открывшемся диалоговом окне на вкладке **Серверное** установить параметр:

* _Использует только API_ - активировать чекбокс параметра

![](../.gitbook/assets/izobrazhenie%20%28168%29.png)

Далее добавить следующие параметры: 

* _Путь вашего обработчика\*_ - вставить скопированный вебхук с платформы Metabot24;
* _Путь для первоначальной установки_ - вставить скопированный вебхук с платформы Metabot24.
* В блок _Настройка прав_ добавить разделы: 
  * CRM
  * Чат и уведомления
  * Создание и управление Чат-ботами
  * Пользователи
  * Списки
  * Открытые линии

После проверки всех указанных параметров нажать на кнопку **Сохранить**.

![](../.gitbook/assets/izobrazhenie%20%28126%29.png)

Последовательно скопировать _Код приложения \(client\_id\)_ и _Ключ приложения \(client\_secret\)_ обратно в настройки  привязки к каналам на платформе.

![](../.gitbook/assets/izobrazhenie%20%28176%29.png)

Для этого перейти на платформе в раздел **Настройки -&gt; Каналы** и открыть канал Bitrix для редактирования.

![](../.gitbook/assets/image%20%28182%29.png)

Вставить последовательно скопированные _Код приложения_ и _Ключ приложения_ и сохранить данную настройку, нажав кнопку **Сохранить**.

![](../.gitbook/assets/image%20%2899%29.png)

Если все сделано правильно, то настроенный канал Bitrix будет выглядеть следующим образом.

![](../.gitbook/assets/image%20%28100%29.png)

### Настройка Открытых линий в Битрикс24

Открытые линии в Битрикс24 собирают сообщения со всех каналов, распределяют их по очереди, маршрутизируют между сотрудниками, и все это в режиме реального времени. И в них можно настроить чат-бот, который облегчит работу сотрудников, систематизирует обращения и многое другое.

Создавать _Открытые линии_ может администратор Битрикс24 в **Контакт-центре** – нужно всего лишь выбрать любой канал. Итак, рассмотрим подключение _Открытой линии_ на примере канала Telegram

![](../.gitbook/assets/image%20%28225%29.png)

{% hint style="info" %}
Как провести подключение канала, можно ознакомиться в инструкции Битрикс24 или обратиться в нашу службу поддержки по удобному каналу связи на странице [Помощь](https://app.metabot24.com/help).
{% endhint %}

В диалоговом окне подключенного канала необходимо произвести настройку _Открытой линии_, для этого с помощью кнопки **Настроить** перейти к ее настройкам.

![](../.gitbook/assets/image%20%28218%29.png)

В настройках перейти на вкладку **Чат-боты**, активировать разрешающий чекбокс и заполнить остальные поля, как указано на рисунке.

![](../.gitbook/assets/image%20%28101%29.png)

На вкладке **Автоматические действия** также рекомендуем провести настройки по отключению автоматических сообщений.

![](../.gitbook/assets/image%20%28141%29.png)

### Настройка статусов 

После настройки интеграции канала ****необходимо выполнить синхронизацию статусов. В разделе **Настройки -&gt; Статусы** выполнить следующие действия:

* Нажать кнопку ****[_**Синхронизация**_](https://app.metabot24.com/status/sync)_**;**_
* Подтвердить или отменить выполняемую операцию.

![](../.gitbook/assets/image%20%28163%29.png)

{% hint style="warning" %}
Следует помнить, что изначально рекомендуем в боте наименования статусов устанавливать идентично используемым по воронке статусам справочника **Лиды** в Битрикс24.
{% endhint %}

{% hint style="success" %}
Синхронизация завершена успешно, если в списке **Статусов** появятся записи с заполненным полем _**Внешний ID**, которое является идентификатором статуса в Битрикс24._
{% endhint %}

### Работа бота в Открытой линии

Диалог пользователя с чат-ботом представлен на рисунке. 

![](../.gitbook/assets/image%20%2869%29.png)

В Битрикс24 данный диалог можно открыть из карточки лида.

![](../.gitbook/assets/image%20%28215%29.png)

