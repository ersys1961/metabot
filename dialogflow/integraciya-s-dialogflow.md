---
description: Рассмотрим последовательность действий при настройке интеграции с Dialogflow
---

# Интеграция с Dialogflow

{% embed url="https://www.youtube.com/watch?v=fly595yxMIo" %}

#### Для того, чтобы бот смог использовать накопившуюся базу знаний, необходимо произвести интеграцию сервиса Dialogflow с платформой Metabot24: <a id="dlya-sozdaniya-uchetnoi-zapisi-na-platforme-metabot24-neobkhodimo"></a>

* Зайдите в сервис Dialogflow, через ваш аккаунт Google.
* Откройте созданный проект **CakeBot.**
* Для установки интеграции DF с платформой Metabot24, необходимо получить уникальный ключ.
* Нажмите на кнопку **Настройки** в виде "шестеренки" 

![](../.gitbook/assets/image%20%28104%29.png)

* В диалоговом окне нажать на ссылку в поле _Project ID._

![](../.gitbook/assets/izobrazhenie%20%28289%29.png)

* Необходимо пройти регистрацию в облачном сервисе. для это надо заполнить следующие параметры:
  * _Страна_ - укажите страну проживания, выбрав из списка Russia;
  * _Условия использования_  - чекбокс перевести в активное состояние. Данный параметр подтверждает ваше согласие с правилами пользования  сервисом. Обязательно заполнять;
  * _Уведомления по электронной почте_ - параметр заполняется по желанию, если хотите получать рассылку от сервиса. Не обязательно заполнять;
  * Нажать кнопку _**Принять и продолжить**_. 

![](../.gitbook/assets/image%20%28151%29.png)

* Система перенаправлена на консоль Google Cloud

![](../.gitbook/assets/izobrazhenie%20%28395%29.png)

* Далее переходим в раздел **API & Services** в подраздел **Credentials.**

![](../.gitbook/assets/izobrazhenie%20%2839%29.png)

* Далее создать новые **Учетные данные**, для этого перейти в мастер создания учетных данных.

![](../.gitbook/assets/izobrazhenie%20%28252%29.png)

* Далее указать какой API будет использоваться и планируется ли использовать этот API для App Engine или Compute Engine. Нажать выбор типа учетный данных как показано на рисунке.

![](../.gitbook/assets/izobrazhenie%20%28253%29.png)

* В блоке _Create a service account_ \(_Создание сервисного аккаунта\)_ указать **Название сервисного аккаунта** и выбрать _Role_ - **Project - Owner,** как показано на рисунке. 
  * Активность параметра **JSON** оставляем без изменений.
  * Нажать на кнопку _**Continue**_.

![](../.gitbook/assets/izobrazhenie%20%28128%29.png)

* Браузер автоматически скачает файл с закрытым ключом.
* В информационном сообщении мы получим уведомление об успешном создании и скачивании закрытого ключа.

![](../.gitbook/assets/izobrazhenie%20%28190%29.png)

* Открыть файл с ключом любым текстовым редактором, например: блокнотом, и скопировать весь текст в буфер обмена.

![](../.gitbook/assets/izobrazhenie%20%2840%29.png)

* Переходим на платформу Metabot24 в ваш аккаунт.
* В разделе **Настройки бота** выбрать пункт [**Интеграции**](https://app.metabot24.com/bot-integration)**.**

![](../.gitbook/assets/image%20%2898%29.png)

* [Создать](https://metabot24.com/bot-integration/create) новую интеграцию, нажав на кнопку **Новая привязка**.

![](../.gitbook/assets/image%20%28186%29.png)

* В диалоговом окне заполнить следующие параметры:
  * _Интеграционная система_ - выбрать из списка Dialogflow;
  * _Авторизационный ключ \(json\)_  - из буфера обмена скопировать полностью текст закрытого ключа;
  * _Токен_ - параметр остается не заполненным;
  * Нажать кнопку _**Создать**_.

![](../.gitbook/assets/image%20%28171%29.png)

* В разделе [**Интеграции с ботом**](https://app.metabot24.com/bot-integration) располагается список всех настроенных интеграционных привязок для данного бота с доступными операциями: 
  * _Редактировать_ - открывается форма для редактирования выбранной интеграции;
  * _Удалить -_ при нажатии производится удаление выбранной привязки.

![](../.gitbook/assets/image%20%28114%29.png)

* Для того чтобы, предоставить доступ к вашему проекту другим пользователям с электронным адресом сервиса Google, необходимо в сервисе DF перейти на вкладку **Share.**
* В поле _Enter email_ добавить электронные адреса аккаунтов Google для ваших сотрудников и указать соответствующие роли.

![](../.gitbook/assets/image%20%28233%29.png)

* Для каждого добавленного пользователя в проект DF необходимо указать одну роль: 
  * DEVELOPER - роль с функциями разработчика;
  * REVIEWER - роль с функцией наблюдатель, без права вносить правки в базу знаний..

![](../.gitbook/assets/image%20%2859%29.png)

Нужно нажать на **Save** после добавления всех адресов, чтобы сохранить изменения.

{% hint style="success" %}
Поздравляем Вас с успешным созданием интеграции с сервисом Dialogflow!
{% endhint %}



