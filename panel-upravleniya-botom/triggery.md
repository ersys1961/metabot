---
description: Функция позволяющая приводить в систему список некоторых действий или событий.
---

# Триггеры

### Логика запуска триггера описана на примере установки триггера.

Триггеры можно создавать в разделе главного меню **Настройки бота** подраздел [**Триггеры**](https://app.metabot24.com/bot-trigger)**.** 

На экранной форме нажать кнопку [_**Новый триггер**_](https://app.metabot24.com/bot-trigger/create)**.**

![](../.gitbook/assets/image%20%2838%29.png)

### Пример 1

Создадим триггер без подписки на событие, для этого заполним следующие параметры:

* **Наименование триггера** - текстовое интуитивно понятное название триггера.
* **Список событий,** на которые может быть подписан триггер с названием объекта, который будет подписан на данный тип события \(например полное название тэга, контекста, атрибута и т.д\).:
  * Любое изменение Лида
  * Изменение статуса Лида
  * Изменение \(добавление или удаление\) Тэга Лида
  * Изменение \(добавление или удаление\) Контекста Лида
  * Изменение Атрибута Лида
  * Любое изменение в Заказе
* **Запускаемый скрипт** - значение выбирается из списка созданных скриптов.

{% hint style="warning" %}
Выполняется добавление в очередь на запуск привязанного скрипта. В планировщике в установленное время выполняется запуск указанного Скрипта. 
{% endhint %}

* **Запускаемый триггер** - значение выбирается из списка созданных триггеров.

{% hint style="warning" %}
Выполняется добавление в очередь на запуск привязанного триггера. В планировщике в установленное время выполняется запуск указанного Триггера. Если для запуска указан другой триггер, то проверка условия будет выполнена перед запуском второго триггера, т.е. по расписанию планировщика.
{% endhint %}

{% hint style="warning" %}
Для запуска могут быть указаны как Скрипт, так и Триггер одновременно.
{% endhint %}

* **Запустить указанный Скрипт/Триггер в** - указывается дата и время, в которое будет выполнен запуск триггера/скрипта точно в указанное время \(с погрешностью в 1 минуту\).
* **Запустить указанный Скрипт/Триггер через \(минут\)** - числовое значение в минутах, через которое будет выполнен запуск триггера/скрипта, спустя указанное количество минут. 

{% hint style="warning" %}
Параметр _Запустить указанный Скрипт/Триггер через \(минут\)_ **игнорируется**, если указано точное время запуска, т.е. если указан параметр _Запустить указанный Скрипт/Триггер в_.
{% endhint %}

* **JavaScript условие запуска Скрипта/Триггера** - условие, при выполнении которого произойдет запуск триггера.

{% hint style="warning" %}
Если запуск триггера должен быть выполнен как отложенный по времени \(указано время запуска или время, через которое нужно запустить триггер\), то проверка JS условия **текущего триггера** выполняется до запуска триггера, а не в момент наступления указанного времени.
{% endhint %}

{% hint style="success" %}
Если поле JS условия пусто, то оно всегда истинно при проверке.
{% endhint %}

Нажать кнопку _**Создать**_.

![](../.gitbook/assets/image%20%28139%29.png)

На экранной форме в разделе [**Триггеры**](https://app.metabot24.com/bot-trigger) будет располагаться список созданных триггеров для данного бота.

![](../.gitbook/assets/image%20%28195%29.png)

{% hint style="success" %}
### Этапы запуска и установки триггера:

* Наступление события для запуска триггера или отложенный запуск по расписанию.
* Проверка JS условия.
* Запуск связанного Скрипта / Триггера или добавление отложенного запуска в планировщик.
{% endhint %}

В разделе **Триггеры** располагается список созданных триггеров для данного бота с доступными операциями:

* Редактировать триггер
* Удалить триггер
* Подписчики получившие сообщение в результате выполнения триггера
* Сообщения полученные подписчиками в результате выполнения триггера

![](../.gitbook/assets/image%20%2842%29.png)

