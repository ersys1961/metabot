---
description: Список конечных клиентов или пользователей взаимодействовавших с ботом
---

# Лиды

{% embed url="https://www.youtube.com/watch?v=xXYHu5sDJHY" %}

Конечные клиенты или пользователи, которые непосредственно общаются с ботом называются **лидами** (далее слова лиды и пользователи будут взаимозаменяемы), это понятие происходит от английского слова lead — термин из сферы продаж и маркетинга означающий потенциального клиента.&#x20;

Мы будем часто говорить о пользователях, поскольку правильно рассматривать чат-боты, как сервис для самообслуживания, а также потому, что мы часто будем говорить о разработке полноценных приложений. Там, где есть пользователи, есть пользовательский интерфейс, его удобство и опыт. Все это важные концепции, понимание которых необходимо для создания успешных решений.&#x20;

Итак, все пользователи, которые когда либо взаимодействовали с вашим ботом аккумулируются на вкладке **Лиды** в вашем Боте. Когда пользователь связывается с компанией через аккаунт в мессенджере, социальной сети или через окно чата на сайте (в общем, через любой канал связи), создаётся лид.&#x20;

В раздел [**Лиды**](https://app.metabot24.com/lead) можно перейти по одноименной кнопке на главном экране или из панели управления раздела **Настройки бота** выбрать пункт меню [**Лиды**](https://app.metabot24.com/lead)**.**

![Раздел "Лиды"](<../.gitbook/assets/izobrazhenie (240).png>)

В лиде на платформе сохраняются все параметры, которые он может приобрести во время общения с ботом. Один из примеров - теги и атрибуты пользователя — те данные, которые бот создает в ходе диалога. Также по каждому лиду платформы хранится вся история диалога, со всеми временными обозначениями. Диалог осуществляется с помощью обмена вебхуков, историю (лог) которых также можно просмотреть через лида, в целях проверки работы видимых или невидимых для пользователя команд бота.&#x20;

В соответствующем разделе на платформе размещается список пользователей - Лидов, которые взаимодействовали с ботом. По лиду производится сбор следующей информации:

* **Клиент** - логин пользователя;
* **Внешний ID;**
* **Канал** - канал интеграции;
* **Мессенджер** - при создании лида заполняется данными мессенджера по каналу интеграции;
* **Менеджер -** закрепленный за пользователем менеджер;
* **Статус** - действующий статус лида на данный момент времени;
* **Атрибуты** - список атрибутов, сохраненных в базе, например: значения, тэги, контекст;
* **Операции**:
  * Отключение / включение реакции бота на сообщения лида;
  * Сообщения- список всех сообщений данного пользователя с ботом;
  * Редактировать - форма редактирования реквизитов по выбранной строке списка лидов;
  * Сбросить беседу для этого лида.

### Фильтрация и поиск

Фильтрация и поиск данных может производиться по следующим параметрам:

* **Лид** - поиск по выпадающему списку всех лидов, взаимодействовавших с этим ботом;
* **Тэг** - фильтр, выбор значения _Тэга_ из выпадающего списка тэгов, которые были назначены  лидам, взаимодействовавшим с этим ботом;
* **Переменная** - фильтр, выбор значения _Переменной_ из выпадающего списка переменных, которые были назначены  лидам, взаимодействовавшим с этим ботом;
* **Выключен** - фильтр по параметру включен или выключен бот для лида:&#x20;
  * если ДА, то фильтруются лиды, для которых бот _выключен_;
  * если НЕТ, то фильтруются лиды, для которых бот _включен_.
* **Канал** - фильтр, выбор значения _Канала_ из выпадающего списка подключенных в данном боте каналов;
* **NLP** - фильтр, выбор значения по Активной NLP интеграции из выпадающего списка;
* **Статус** - фильтр, выбор значения _Статуса_ из выпадающего списка статусов, которые были назначены  лидам, взаимодействовавшим с этим ботом;
* **Контекст** - фильтр, выбор значения _Контекст_ из выпадающего списка контекстных данных, которые были назначены  лидам, взаимодействовавшим с этим ботом;
* **Значение** - фильтр, выбор _Значения_ из выпадающего списка значений, которые были присвоены  лидам, взаимодействовавшим с этим ботом;
* **Чат передан оператору** - фильтр по параметру передал ли диалог с лидом оператору:&#x20;
  * если ДА, то фильтруются лиды, для которых диалог/чат передан оператору;
  * если НЕТ, то фильтруются лиды, для которых диалог/чат ведется ботом.
* **Мессенджер** - фильтр, выбор значения _Мессенджера_ из выпадающего списка мессенджеров, через которые общались лиды в данном боте.
* **Дата создания** - период, в котором были созданы диалоги лидов с данным ботом. Можно установить дату С и не ограничивать дату По, или наоборот. По умолчанию дата С - не установлена, дата По - текущая дата календаря;
* **Последняя активность** - период, в котором была зарегистрирована последняя активность лидов с данным ботом. Можно установить дату С и не ограничивать дату ПО, или наоборот. По умолчанию период устанавливается последняя неделя.

После установки параметров фильтрации нажать кнопку _**Применить фильтр**_.

Если необходимо сбросить все установленные фильтры, то нажать кнопку _**Сбросить фильтр**_.

![](<../.gitbook/assets/izobrazhenie (462).png>)

Если необходимо сбросить один какой-либо параметр фильтрации, оставив остальные, то надо нажать _крестик_ на данном параметре и кнопку _Применить фильтр_.

![](<../.gitbook/assets/izobrazhenie (250).png>)

Под наименование раздела Лиды указано количество лидов общее или по примененному в текущий момент фильтру.

![](<../.gitbook/assets/izobrazhenie (398).png>)



### Сортировка данных

В разделе **Лиды** можно сортировать данные по следующим параметрам:

* По возрастанию сортировка по дате создания диалога, вначале таблицы отображаются данные с последнего созданного диалога;
* По убыванию сортировка по дате создания диалога, вначале таблицы отображаются данные с первого созданного диалога;
* По возрастанию сортировка по дате последней активности лида, вначале таблицы отображаются данные с последнего диалога по дате активности;
* По убыванию сортировка по дате последней активности, вначале таблицы отображаются данные с первого диалога по дате активности.

Необходимо в поле _Сортировка_ выбрать нужный параметр и нажать кнопку _**Применить фильтр**_

![](<../.gitbook/assets/izobrazhenie (162).png>)

Сортировка может применяться совместно к данным по примененным параметрам фильтрации. По умолчанию установлена обратная сортировка по дате создания диалогов.

### Функциональные возможности

#### Экспорт / Импорт лидов

Над списком _Лидов_ возможно выполнение следующих функций:

* _Экспорт_ - при нажатии на ссылку формируется файл формата \*.csv;
* _Экспорт в JSON_ - при нажатии на ссылку экспортируется список лидов в формете json;
* _Импорт из JSON_ - при нажатии на ссылку импортируется список лидов из формата json;
* _Сбросить все беседы_ - при нажатии на ссылку происходит сброс бесед по всем лидам, взаимодействовавших с ботом.

![](<../.gitbook/assets/izobrazhenie (130).png>)

#### Работа с сообщениями

Для просмотра списка сообщений, которые были записаны при взаимодействии лида с ботом, необходимо нажать кнопку _Сообщения_. На значке показано общее количество сообщений с данным лидом.

![](<../.gitbook/assets/izobrazhenie (59).png>)

По умолчанию открывается список сообщений лида за последнюю неделю. На экранной форме также отображены все параметры по данной записи доступные для просмотра.

![](<../.gitbook/assets/izobrazhenie (357).png>)

Для того чтобы открыть весь список сообщений, необходимо сбросить период отбора и нажать кнопку _Применить фильтр._

![](<../.gitbook/assets/izobrazhenie (269).png>)

{% hint style="info" %}
Для канала _ **Telegram** и **Umnico** _ имеется возможность напрямую отправить с платформы сообщение лиду.&#x20;
{% endhint %}

Для этого необходимо нажать кнопку _Отправить сообщение_.

![](<../.gitbook/assets/izobrazhenie (392).png>)

Далее в открывшейся форме набрать текст, также можно добавить эмодзи и нажать кнопку _Отправить сообщение._

![](<../.gitbook/assets/izobrazhenie (404).png>)

#### Блокировка работы бота

По одному любому выбранному Лиду бот можно остановить, нажав на кнопку _Отключение реакции бота на сообщения лида_ в блоке **Операции.**

![](<../.gitbook/assets/image (238).png>)

При активном положении данной кнопки у лида:

* блокируются рассылки по лиду (лид не попадает в выборку лидов для рассылки, т.е. при планировании или запуске рассылки, по данному лиду не будет даже проверяться v8 условие);
* если уже имеются какие-либо запланированные задания на выполнение по времени, то они будут отменены;
* если лид самостоятельно в канале Telegram остановит работу бота, а далее ее возобновит через интерфейс мессенджера, то работа бота возобновится, а кнопка перейдет в положение "Отключено", как показано на рисунке выше.

#### Отладка бота

У лида можно настроить уровень отладки бота, для это необходимо воспользоваться кнопкой _Редактировать уровень отладки бота_ в блоке **Операции**.

![](<../.gitbook/assets/image (244).png>)

В диалоговом окне необходимо выбрать настройки уровня:

* Выключено - параметр по умолчанию;
* Только V8 (editor) - уровень editor можно выставлять любым пользователя бота;
* V8 и Exceptions (admin) - уровень admin можно выставлять только администраторам платформы или проверенным разработчикам.

![](<../.gitbook/assets/image (239).png>)

При включенном уровне отладки бота будет выдаваться форматированное сообщение об ошибке V8 в боте.

* на русском языке

![](<../.gitbook/assets/image (237).png>)

* на английском языке

![](<../.gitbook/assets/image (240).png>)

#### Сброс беседы

Для того, чтоб лид вернулся в первоначальную точку беседы с ботом можно воспользоваться функцией сброса диалога по одному лиду, для это необходимо воспользоваться кнопкой _Сбросить беседу для этого лида_ в блоке **Операции**.

![](<../.gitbook/assets/image (242).png>)

{% hint style="warning" %}
Если всему боту требуется обновление, то можно воспользоваться командой **Сбросить все беседы**.
{% endhint %}

### Редактирование карточки лида

В разделе редактирования лида можно самостоятельно проставить теги, присвоить новый атрибут, поменять статус лида, присвоить статус или ответственного менеджера, а также установить язык или настроить интеграцию (если в боте их две и более), для этого необходимо воспользоваться кнопкой _Редактировать_ в блоке **Операции**.

![](<../.gitbook/assets/image (241).png>)

В карточке лида имеется возможность редактирования активной интеграции. Для этого в выпадающем списке есть все NLP интеграции, в том числе и не активные. Это сделано для того, что могут установить интеграцию, а затем снять галку активности, в таком случае после сохранения на форме редактирования карточки было бы сброшено значение.

![](<../.gitbook/assets/izobrazhenie (458).png>)

![](<../.gitbook/assets/izobrazhenie (459).png>)

После установки активной интеграции по лиду, она отображается в параметре _Активная NLP интеграция_.&#x20;

В параметре _nlpLastIntegrationCode_ отображается код последней NLP интеграции, а в параметре _nlpLastIntegrationId_ - ID последней NLP интеграции.

![](<../.gitbook/assets/izobrazhenie (461).png>)

